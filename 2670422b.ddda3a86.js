(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{139:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return s})),n.d(t,"rightToc",(function(){return c})),n.d(t,"default",(function(){return u}));var r=n(1),o=n(9),a=(n(0),n(180)),i={},s={id:"conflux-portal/04_Best_Practices/01_Registering_Your_Token",title:"01_Registering_Your_Token",description:"# Registering Tokens with Users",source:"@site/docs/conflux-portal/04_Best_Practices/01_Registering_Your_Token.md",permalink:"/docs/conflux-portal/04_Best_Practices/01_Registering_Your_Token",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/conflux-portal/04_Best_Practices/01_Registering_Your_Token.md",lastUpdatedBy:"yqrashawn",lastUpdatedAt:1584095669},c=[{value:"Code-free Example",id:"code-free-example",children:[]},{value:"Example",id:"example",children:[]},{value:"Default Token List",id:"default-token-list",children:[]}],l={rightToc:c};function u(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(a.b)("wrapper",Object(r.a)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("h1",{id:"registering-tokens-with-users"},"Registering Tokens with Users"),Object(a.b)("p",null,"When a user opens their ConfluxPortal, they are shown a variety of assets,\nincluding tokens. By default, ConfluxPortal auto-detects some major popular\ntokens and auto-displays them, but for most tokens, the user will need to add\nthe token themselves. "),Object(a.b)("p",null,"While this is possible using our UI with the ",Object(a.b)("inlineCode",{parentName:"p"},"Add Token")," button, that process\ncan be cumbersome, and involves the user interacting with contract addresses,\nand is very error prone. "),Object(a.b)("p",null,"You can greatly improve the security and experience of users adding your token\nto their ConfluxPortal by taking advantage of the ",Object(a.b)("inlineCode",{parentName:"p"},"wallet_watchAsset")," API as\ndefined in ",Object(a.b)("a",Object(r.a)({parentName:"p"},{href:"https://github.com/estebanmino/EIPs/blob/master/EIPS/eip-747.md"}),"EIP\n747"),". "),Object(a.b)("h2",{id:"code-free-example"},"Code-free Example"),Object(a.b)("p",null,"Here are a couple live web applications that let you enter your token details,\nand then share them with a simple web link: "),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},Object(a.b)("a",Object(r.a)({parentName:"li"},{href:"https://vittominacori.github.io/watch-token/create.html"}),"Watch Token")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("a",Object(r.a)({parentName:"li"},{href:"https://metamask.github.io/Add-Token/#edit"}),"Add Token App"))),Object(a.b)("h2",{id:"example"},"Example"),Object(a.b)("p",null,"If you'd like to integrate suggesting a token into your own web app, you can\nfollow this code snippet to implement it: "),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-javascript"}),'const tokenAddress = \'0xd00981105e61274c8a5cd5a88fe7e037d935b513\'\nconst tokenSymbol = \'TUT\'\nconst tokenDecimals = 18\nconst tokenImage = \'http://placekitten.com/200/300\'\n\nconflux.sendAsync({\n    method: \'wallet_watchAsset\',\n    params: {\n      "type":"ERC20",\n      "options":{\n        "address": tokenAddress,\n        "symbol": tokenSymbol,\n        "decimals": tokenDecimals,\n        "image": tokenImage,\n      },\n    },\n    id: Math.round(Math.random() * 100000),\n}, (err, added) => {\n\n  if (added) {\n    console.log(\'Thanks for your interest!\')\n  } else {\n    console.log(\'Your loss!\')\n  }\n\n})\n')),Object(a.b)("h2",{id:"default-token-list"},"Default Token List"),Object(a.b)("p",null,"If you're a major and popular token, you may qualify to be listed in our\n",Object(a.b)("a",Object(r.a)({parentName:"p"},{href:"https://github.com/yqrashawn/cfx-contract-metadata"}),"cfx-contract-metadata"),"\nregistry. This is a centralized solution and takes a larger toll on our\ndevelopment team, so we prefer to avoid the politics of picking and choosing\ntokens that get auto-detected in users' accounts, so please see if the EIP-747\nmethod above can suit your needs before submitting a new token there for\ninclusion. "),Object(a.b)("p",null,"If you have a user on your site, asking them to click once to add a token is a\nsmall burden on them, and allows you to leverage the trusting relationship you\nalready have with your user instead of our central repository. "))}u.isMDXComponent=!0},180:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m}));var r=n(0),o=n.n(r);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=o.a.createContext({}),u=function(e){var t=o.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s({},t,{},e)),n},p=function(e){var t=u(e.components);return o.a.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},b=Object(r.forwardRef)((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,i=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),p=u(n),b=r,m=p["".concat(i,".").concat(b)]||p[b]||d[b]||a;return n?o.a.createElement(m,s({ref:t},l,{components:n})):o.a.createElement(m,s({ref:t},l))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=b;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var l=2;l<a;l++)i[l]=n[l];return o.a.createElement.apply(null,i)}return o.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"}}]);