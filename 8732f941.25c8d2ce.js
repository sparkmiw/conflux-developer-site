(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{159:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return c})),n.d(t,"rightToc",(function(){return s})),n.d(t,"default",(function(){return p}));var r=n(1),a=n(9),o=(n(0),n(180)),i={},c={id:"conflux-portal/04_Best_Practices/00_Registering_Function_Names",title:"00_Registering_Function_Names",description:"# Registering Your Contract's Method Names",source:"@site/docs/conflux-portal/04_Best_Practices/00_Registering_Function_Names.md",permalink:"/docs/conflux-portal/04_Best_Practices/00_Registering_Function_Names",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/conflux-portal/04_Best_Practices/00_Registering_Function_Names.md",lastUpdatedBy:"yqrashawn",lastUpdatedAt:1584095669},s=[],l={rightToc:s};function p(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(o.b)("wrapper",Object(r.a)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("h1",{id:"registering-your-contracts-method-names"},"Registering Your Contract's Method Names"),Object(o.b)("p",null,"ConfluxPortal uses the parity on-chain registry of function signatures to\ndisplay method names on the confirm screen. For many common method names, like\ntoken methods, this allows ConfluxPortal to successfully look up the method\nnames by their ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"https://solidity.readthedocs.io/en/v0.4.21/abi-spec.html"}),"method\nsignature"),"."),Object(o.b)("p",null,"However, sometimes you're using a method that is not in that on-chain registry,\nand ConfluxPortal will simply display ",Object(o.b)("inlineCode",{parentName:"p"},"Unknown Function")," to the user.  "),Object(o.b)("p",null,"To add your contract's function names to this registry so it shows in the\nConfluxPortal interface, follow the below steps. "),Object(o.b)("p",null,Object(o.b)("em",{parentName:"p"},"We (conflux) don't support below features right now.")," "),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Go to the ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"https://etherscan.io/address/0x44691b39d1a75dc4e0a0346cbb15e310e6ed1e86#writeContract"}),"mainnet parity signature registration contract on\netherscan")," ")),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Connect ConfluxPortal")),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Use etherscan's write contract feature to input the string value (without\nquotes or spaces) to the register function "),Object(o.b)("p",{parentName:"li"},"for example:"),Object(o.b)("p",{parentName:"li"},Object(o.b)("inlineCode",{parentName:"p"},"getOwners()")),Object(o.b)("p",{parentName:"li"},Object(o.b)("inlineCode",{parentName:"p"},"execTransaction(address,uint256,bytes,uint8,uint256,uint256,uint256,address,address,bytes)"))),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Press write")),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Approve the transaction through ConfluxPortal (you only pay gas)"))),Object(o.b)("h5",{id:"verify"},"Verify"),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"web3.sha3('getOwners()') =>\n0xa0e67e2bdc0a6d8a09ccd6c353c9df590807ad66ff5e6630c4f31a86dfa84821")),Object(o.b)("p",null,"take the first 10 characters ",Object(o.b)("inlineCode",{parentName:"p"},"0xa0e67e2b")," and input into ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("a",Object(r.a)({parentName:"strong"},{href:"https://jennypollack.github.io/function_signature_registry/"}),"this demo\napp")," that checks\nthe on-chain registry")," (mainnet or rinkeby) "),Object(o.b)("h5",{id:"alternate-steps-using-remixethereumorg"},"Alternate steps using remix.ethereum.org:"),Object(o.b)("p",null,"Paste the contract code from ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"https://www.bokconsulting.com.au/blog/a-quick-look-at-paritys-signature-registry-contract/"}),"bokky's blog\npost"),"\ninto ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"remix.ethereum.org"}),"remix")," "),Object(o.b)("p",null,"Set the correct compiler version based on the contract."),Object(o.b)("p",null,"Use remix's write functionality to add to the registry."),Object(o.b)("p",null,"You can look at the FUNCTIONHASHES section on remix.conflux.org by loading the\nsignature registry contract, press the Details button on the compile tab. "),Object(o.b)("h5",{id:"additional-info"},"Additional Info"),Object(o.b)("p",null,"You can also use the ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"https://rinkeby.etherscan.io/address/0x0c0831fb1ec7442485fb41a033ba188389a990b4"}),"signature\nregistry"),"\ndeployed on rinkeby but should note that ",Object(o.b)("strong",{parentName:"p"},"ConfluxPortal reads from the mainnet\neth-method-registry endpoint, regardless of user's network")," "),Object(o.b)("p",null,Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"https://github.com/danfinlay/eth-method-registry"}),"eth-method-registry")," is used\nto lookup methods in ConfluxPortal. "),Object(o.b)("p",null,"This ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"https://conflux.stackexchange.com/questions/59678/metamask-shows-unknown-function-when-calling-method-send-function"}),"stack\nexchange"),"\nanswer is a good ",Object(o.b)("strong",{parentName:"p"},"tldr"),". "))}p.isMDXComponent=!0},180:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return d}));var r=n(0),a=n.n(r);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=a.a.createContext({}),p=function(e){var t=a.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):c({},t,{},e)),n},b=function(e){var t=p(e.components);return a.a.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},m=Object(r.forwardRef)((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,i=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),b=p(n),m=r,d=b["".concat(i,".").concat(m)]||b[m]||u[m]||o;return n?a.a.createElement(d,c({ref:t},l,{components:n})):a.a.createElement(d,c({ref:t},l))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=m;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:r,i[1]=c;for(var l=2;l<o;l++)i[l]=n[l];return a.a.createElement.apply(null,i)}return a.a.createElement.apply(null,n)}m.displayName="MDXCreateElement"}}]);