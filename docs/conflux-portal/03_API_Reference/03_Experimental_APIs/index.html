<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus">


<title data-react-helmet="true">03_Experimental_APIs | My Site</title>

<meta data-react-helmet="true" http-equiv="x-ua-compatible" content="ie=edge"><meta data-react-helmet="true" property="og:title" content="My Site"><meta data-react-helmet="true" name="twitter:card" content="summary"><meta data-react-helmet="true" name="description" content="# Experimental APIs"><meta data-react-helmet="true" property="og:description" content="# Experimental APIs"><meta data-react-helmet="true" property="og:url" content="https://your-docusaurus-test-site.com/docs/conflux-portal/03_API_Reference/03_Experimental_APIs">

<link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico">


<link rel="stylesheet" href="/styles.d1b2d067.css">


<link rel="preload" href="/styles.c69c89ab.js" as="script">

<link rel="preload" href="/runtime~main.61f124db.js" as="script">

<link rel="preload" href="/main.67fa9440.js" as="script">

<link rel="preload" href="/1.960eedb4.js" as="script">

<link rel="preload" href="/2.01f95d9f.js" as="script">

<link rel="preload" href="/3.c9db19d1.js" as="script">

<link rel="preload" href="/1be78505.104f395d.js" as="script">

<link rel="preload" href="/20ac7829.d68628c0.js" as="script">

<link rel="preload" href="/17896441.bed5d48b.js" as="script">

<link rel="preload" href="/4cf868fd.5d2c1974.js" as="script">

</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}function e(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}var n=window.matchMedia("(prefers-color-scheme: dark)");n.addListener((function(n){null===e()&&t(n.matches?"dark":"")}));var a=e();null!==a?t(a):n.matches&&t("dark")}()</script>
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo" src="/img/logo.svg" alt="Conflux Logo"><strong>Conflux Developer</strong></a><a class="navbar__item navbar__link" href="/docs/introduction/en/what_is_conflux">Docs</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" target="_blank" rel="noopener noreferrer" href="https://github.com/facebook/docusaurus">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo" src="/img/logo.svg" alt="Conflux Logo"><strong>Conflux Developer</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/introduction/en/what_is_conflux">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">Blog</a></li><li class="menu__list-item"><a class="menu__link" target="_blank" rel="noopener noreferrer" href="https://github.com/facebook/docusaurus">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><main class="docMainContainer_FFX1"><div class="padding-vert--lg"><div class="container"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">03_Experimental_APIs</h1></header><div class="markdown"><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="experimental-apis"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#experimental-apis" title="Direct link to heading">#</a>Experimental APIs</h1><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="wallet_watchasset"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#wallet_watchasset" title="Direct link to heading">#</a>wallet_watchAsset</h2><p>Most all Conflux wallets display some set of tokens, usually from a centrally
curated registry of tokens. </p><p>At ConfluxPortal, we believe the future of tokens has the potential to be much
bigger than any one party can curate, and we want to enable this explosion of
creativity. </p><p>In support of this goal, we have implemented support for <a href="https://github.com/estebanmino/EIPs/blob/master/EIPS/eip-747.md">EIP
747</a>, which
provides a way for your site to suggest a token that a user might want to track
in their wallet. </p><p>The code is simple:</p><div class="mdxCodeBlock_iHAB"><pre class="prism-code language-javascript codeBlock_19pQ"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><code class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">conflux</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">sendAsync</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    method</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;metamask_watchAsset&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    params</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;type&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;ERC20&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Initially only supports ERC20, but eventually more!</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;options&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;address&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> tokenAddress</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// The address that the token is at.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;symbol&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> tokenSymbol</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// A ticker symbol or shorthand, up to 5 chars.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;decimals&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> tokenDecimals</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// The number of decimals in the token</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;image&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> tokenImage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// A string url of the token logo</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:rgb(255, 203, 107)">Math</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">round</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token known-class-name class-name" style="color:rgb(255, 203, 107)">Math</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">random</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">100000</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">err</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> addedBoolean</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></code></pre></div><p>We even created a sample Dapp so developers could suggest their tokens to users
with a simple hyperlink, without a line of code. <a href="https://github.com/MetaMask/Add-Token">Visit it
here</a>. </p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="conflux_metamask"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#conflux_metamask" title="Direct link to heading">#</a><code>conflux._metamask</code></h2><p>ConfluxPortal supports the standard Conflux Provider API as defined in both
<a href="https://github.com/conflux/EIPs/blob/master/EIPS/eip-1193.md">EIP-1193</a> and
<a href="https://github.com/conflux/EIPs/blob/master/EIPS/eip-1102.md">EIP-1102</a>. In
addition to <code>conflux.enable()</code> and its RPC equivalent
<code>conflux.send(&#x27;cfx_requestAccounts&#x27;)</code>, ConfluxPortal also exposes a collection
of nonstandard convenience methods on the provider object at
<code>conflux._metamask</code>. <strong>Using these methods is dangerous</strong> since other dapp
browsers may or may not implement them; for this reason, these methods are
intentionally kept at a ConfluxPortal-specific namespace to avoid confusion with
standard provider functionality. </p><p>Each method and its intended use is described below.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="conflux_metamaskisenabled---boolean-to-be-removed"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#conflux_metamaskisenabled---boolean-to-be-removed" title="Direct link to heading">#</a><code>conflux._metamask.isEnabled: () =&gt; boolean</code> (To Be Removed)</h3><p><strong>Note:</strong> This will be removed in <strong>Q1 2020</strong>.</p><p>This method returns a <code>boolean</code> indicating if the current domain has access to
user accounts. This is useful for determining if a user has approved account
access for the current session. </p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="conflux_metamaskisapproved---promiseboolean-to-be-removed"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#conflux_metamaskisapproved---promiseboolean-to-be-removed" title="Direct link to heading">#</a><code>conflux._metamask.isApproved: () =&gt; Promise&lt;boolean&gt;</code> (To Be Removed)</h3><p><strong>Note:</strong> This will be removed in <strong>Q1 2020</strong>.</p><p>This method returns a <code>Promise</code> that resolves to a <code>Boolean</code> indicating if the
current domain has a cached approval. This is useful for determining if an
approval popup will show when <code>conflux.enable()</code> is called, since it indicates
if a past approval exists. </p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="conflux_metamaskisunlocked---promiseboolean"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#conflux_metamaskisunlocked---promiseboolean" title="Direct link to heading">#</a><code>conflux._metamask.isUnlocked: () =&gt; Promise&lt;boolean&gt;</code></h3><p>This method returns a <code>Promise</code> that resolves to a <code>Boolean</code> indicating if
ConfluxPortal is unlocked by the user. This is useful for knowing if
ConfluxPortal is unlocked in order to provide meaningful instructions to the
user during onboarding. Note that this does not indicate if a user has approved
account exposure. </p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/master/website/docs/conflux-portal/03_API_Reference/03_Experimental_APIs.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated on <time datetime="2020-03-13T10:34:29.000Z" class="docLastUpdatedAt_1sqk">3/13/2020</time> by <strong>yqrashawn</strong></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="contents contents__left-border"><li><a href="#wallet_watchasset" class="contents__link">wallet_watchAsset</a></li><li><a href="#conflux_metamask" class="contents__link"><code>conflux._metamask</code></a><ul><li><a href="#conflux_metamaskisenabled---boolean-to-be-removed" class="contents__link"><code>conflux._metamask.isEnabled: () =&gt; boolean</code> (To Be Removed)</a></li><li><a href="#conflux_metamaskisapproved---promiseboolean-to-be-removed" class="contents__link"><code>conflux._metamask.isApproved: () =&gt; Promise&lt;boolean&gt;</code> (To Be Removed)</a></li><li><a href="#conflux_metamaskisunlocked---promiseboolean" class="contents__link"><code>conflux._metamask.isUnlocked: () =&gt; Promise&lt;boolean&gt;</code></a></li></ul></li></ul></div></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/doc1">Style Guide</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/doc2">Second Doc</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://stackoverflow.com/questions/tagged/docusaurus">Stack Overflow</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://discordapp.com/invite/docusaurus">Discord</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://github.com/Conflux-Chain">GitHub</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://twitter.com/confluxchain">Twitter</a></li></ul></div></div><div class="text--center">Copyright © 2020 Conflux Chain, Inc. Built with Docusaurus.</div></div></footer>
</div>

<script src="/styles.c69c89ab.js"></script>

<script src="/runtime~main.61f124db.js"></script>

<script src="/main.67fa9440.js"></script>

<script src="/1.960eedb4.js"></script>

<script src="/2.01f95d9f.js"></script>

<script src="/3.c9db19d1.js"></script>

<script src="/1be78505.104f395d.js"></script>

<script src="/20ac7829.d68628c0.js"></script>

<script src="/17896441.bed5d48b.js"></script>

<script src="/4cf868fd.5d2c1974.js"></script>


</body>
</html>